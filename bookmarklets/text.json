{
   "title":"bookmarklets",
   "children":[
      {
         "title":"highlight",
         "uri":"javascript:(function(){var%20count=0,%20text,%20dv;text=prompt(%22Search%20phrase:%22,%20%22%22);if(text==null%20||%20text.length==0)return;dv=document.defaultView;function%20searchWithinNode(node,%20te,%20len){var%20pos,%20skip,%20spannode,%20middlebit,%20endbit,%20middleclone;skip=0;if(%20node.nodeType==3%20){pos=node.data.toUpperCase().indexOf(te);if(pos%3E=0){spannode=document.createElement(%22SPAN%22);spannode.style.backgroundColor=%22yellow%22;middlebit=node.splitText(pos);endbit=middlebit.splitText(len);middleclone=middlebit.cloneNode(true);spannode.appendChild(middleclone);middlebit.parentNode.replaceChild(spannode,middlebit);++count;skip=1;}}else%20if(%20node.nodeType==1&&%20node.childNodes%20&&%20node.tagName.toUpperCase()!=%22SCRIPT%22%20&&%20node.tagName.toUpperCase!=%22STYLE%22){for%20(var%20child=0;%20child%20%3C%20node.childNodes.length;%20++child){child=child+searchWithinNode(node.childNodes[child],%20te,%20len);}}return%20skip;}window.status=%22Searching%20for%20'%22+text+%22'...%22;searchWithinNode(document.body,%20text.toUpperCase(),%20text.length);window.status=%22Found%20%22+count+%22%20occurrence%22+(count==1?%22%22:%22s%22)+%22%20of%20'%22+text+%22'.%22;})();"
      },
      {
         "title":"highlight regexp",
         "uri":"javascript:(function(){var%20count=0,%20text,%20regexp;text=prompt(%22Search%20regexp:%22,%20%22%22);if(text==null%20||%20text.length==0)return;try{regexp=new%20RegExp(%22(%22%20+%20text%20+%22)%22,%20%22i%22);}catch(er){alert(%22Unable%20to%20create%20regular%20expression%20using%20text%20'%22+text+%22'.\\n\\n%22+er);return;}function%20searchWithinNode(node,%20re){var%20pos,%20skip,%20spannode,%20middlebit,%20endbit,%20middleclone;skip=0;if(%20node.nodeType==3%20){pos=node.data.search(re);if(pos%3E=0){spannode=document.createElement(%22SPAN%22);spannode.style.backgroundColor=%22yellow%22;middlebit=node.splitText(pos);endbit=middlebit.splitText(RegExp.$1.length);middleclone=middlebit.cloneNode(true);spannode.appendChild(middleclone);middlebit.parentNode.replaceChild(spannode,middlebit);++count;skip=1;}}else%20if(%20node.nodeType==1%20&&%20node.childNodes%20&&%20node.tagName.toUpperCase()!=%22SCRIPT%22%20&&%20node.tagName.toUpperCase!=%22STYLE%22){for%20(var%20child=0;%20child%20%3C%20node.childNodes.length;%20++child){child=child+searchWithinNode(node.childNodes[child],%20re);}}return%20skip;}window.status=%22Searching%20for%20%22+regexp+%22...%22;searchWithinNode(document.body,%20regexp);window.status=%22Found%20%22+count+%22%20match%22+(count==1?%22%22:%22es%22)+%22%20for%20%22+regexp+%22.%22;})();"
      },
      {
         "title":"zoom images in",
         "uri":"javascript:(function(){%20function%20zoomImage(image,%20amt)%20{%20if(image.initialHeight%20==%20null)%20{%20/*%20avoid%20accumulating%20integer-rounding%20error%20*/%20image.initialHeight=image.height;%20image.initialWidth=image.width;%20image.scalingFactor=1;%20}%20image.scalingFactor*=amt;%20image.width=image.scalingFactor*image.initialWidth;%20image.height=image.scalingFactor*image.initialHeight;%20}%20var%20i,L=document.images.length;%20for%20(i=0;i%3CL;++i)%20zoomImage(document.images[i],%202);%20if%20(!L)%20alert(%22This%20page%20contains%20no%20images.%22);%20})();"
      },
      {
         "title":"zoom images out",
         "uri":"javascript:(function(){%20function%20zoomImage(image,%20amt)%20{%20if(image.initialHeight%20==%20null)%20{%20/*%20avoid%20accumulating%20integer-rounding%20error%20*/%20image.initialHeight=image.height;%20image.initialWidth=image.width;%20image.scalingFactor=1;%20}%20image.scalingFactor*=amt;%20image.width=image.scalingFactor*image.initialWidth;%20image.height=image.scalingFactor*image.initialHeight;%20}%20var%20i,L=document.images.length;%20for%20(i=0;i%3CL;++i)%20zoomImage(document.images[i],.5);%20if%20(!L)%20alert(%22This%20page%20contains%20no%20images.%22);%20})();"
      },
      {
         "title":"zoom layout",
         "uri":"javascript:factor=Math.sqrt(2);%20if(!window.scale)%20{%20scale=1;%20zW=[];%20zH=[];%20unitless=/^[0-9.]+$/;%20function%20r(N)%20{%20w=N.width;%20h=N.height;%20if%20(unitless.test(w))%20zW.push([N,w]);%20if%20(unitless.test(h))%20zH.push([N,h]);%20var%20C=N.childNodes,i;%20for%20(i=0;i%3CC.length;++i)%20r(C[i]);%20}%20r(document.body);%20}%20scale*=factor;%20for(i%20in%20zW)%20zW[i][0].width=zW[i][1]*scale;%20for(i%20in%20zH)%20zH[i][0].height%20=%20zH[i][1]*scale;%20[].v"
      },
      {
         "title":"view selection",
         "uri":"javascript:(function(){%20var%20d=open().document;%20d.title=%22Selection%22;%20if%20(window.getSelection)%20{%20/*Moz*/%20var%20s%20=%20getSelection();%20for(i=0;%20i%3Cs.rangeCount;%20++i)%20{%20var%20a,%20r%20=%20s.getRangeAt(i);%20if%20(!r.collapsed)%20{%20var%20x%20=%20document.createElement(%22div%22);%20x.appendChild(r.cloneContents());%20if%20(d.importNode)%20x%20=%20d.importNode(x,%20true);%20d.body.appendChild(x);%20}%20}%20}%20else%20{%20/*IE*/%20d.body.innerHTML%20=%20document.selection.createRange().htmlText;%20}%20})();"
      },
      {
         "title":"sort table",
         "uri":"javascript:function%20toArray%20(c){var%20a,%20k;a=new%20Array;for%20(k=0;%20k%3Cc.length;%20++k)a[k]=c[k];return%20a;}function%20insAtTop(par,child){if(par.childNodes.length)%20par.insertBefore(child,%20par.childNodes[0]);else%20par.appendChild(child);}function%20countCols(tab){var%20nCols,%20i;nCols=0;for(i=0;i%3Ctab.rows.length;++i)if(tab.rows[i].cells.length%3EnCols)nCols=tab.rows[i].cells.length;return%20nCols;}function%20makeHeaderLink(tableNo,%20colNo,%20ord){var%20link;link=document.createElement('a');link.href='javascript:sortTable('+tableNo+','+colNo+','+ord+');';link.appendChild(document.createTextNode((ord%3E0)?'a':'d'));return%20link;}function%20makeHeader(tableNo,nCols){var%20header,%20headerCell,%20i;header=document.createElement('tr');for(i=0;i%3CnCols;++i){headerCell=document.createElement('td');headerCell.appendChild(makeHeaderLink(tableNo,i,1));headerCell.appendChild(document.createTextNode('/'));headerCell.appendChild(makeHeaderLink(tableNo,i,-1));header.appendChild(headerCell);}return%20header;}g_tables=toArray(document.getElementsByTagName('table'));if(!g_tables.length)%20alert(%22This%20page%20doesn't%20contain%20any%20tables.%22);(function(){var%20j,%20thead;for(j=0;j%3Cg_tables.length;++j){thead=g_tables[j].createTHead();insAtTop(thead,%20makeHeader(j,countCols(g_tables[j])))}})%20();function%20compareRows(a,b){if(a.sortKey==b.sortKey)return%200;return%20(a.sortKey%20%3C%20b.sortKey)%20?%20g_order%20:%20-g_order;}function%20sortTable(tableNo,%20colNo,%20ord){var%20table,%20rows,%20nR,%20bs,%20i,%20j,%20temp;g_order=ord;g_colNo=colNo;table=g_tables[tableNo];rows=new%20Array();nR=0;bs=table.tBodies;for(i=0;%20i%3Cbs.length;%20++i)for(j=0;%20j%3Cbs[i].rows.length;%20++j){rows[nR]=bs[i].rows[j];temp=rows[nR].cells[g_colNo];if(temp)%20rows[nR].sortKey=temp.innerHTML;else%20rows[nR].sortKey=%22%22;++nR;}rows.sort(compareRows);for%20(i=0;%20i%20%3C%20rows.length;%20++i)insAtTop(table.tBodies[0],%20rows[i]);}"
      },
      {
         "title":"number rows",
         "uri":"javascript:(function(){function%20has(par,ctag){for(var%20k=0;k%3Cpar.childNodes.length;++k)if(par.childNodes[k].tagName==ctag)return%20true;}%20function%20add(par,ctag,text){var%20c=document.createElement(ctag);%20c.appendChild(document.createTextNode(text));%20par.insertBefore(c,par.childNodes[0]);}%20var%20i,ts=document.getElementsByTagName(%22TABLE%22);%20for(i=0;i%3Cts.length;++i)%20{%20var%20n=0,trs=ts[i].rows,j,tr;%20for(j=0;j%3Ctrs.length;++j)%20{tr=trs[j];%20if(has(tr,%22TD%22))add(tr,%22TD%22,++n);%20else%20if(has(tr,%22TH%22))add(tr,%22TH%22,%22Row%22);}}})()"
      },
      {
         "title":"transpose tables",
         "uri":"javascript:(function(){var%20d=document,q=%22table%22,i,j,k,y,r,c,t;for(i=0;t=d.getElementsByTagName(q)[i];++i){var%20w=0,N=t.cloneNode(0);N.width=%22%22;N.height=%22%22;N.border=1;for(j=0;r=t.rows[j];++j)for(y=k=0;c=r.cells[k];++k){var%20z,a=c.rowSpan,b=c.colSpan,v=c.cloneNode(1);v.rowSpan=b;v.colSpan=a;v.width=%22%22;v.height=%22%22;if(!v.bgColor)v.bgColor=r.bgColor;while(w%3Cy+b)N.insertRow(w++).p=0;while(N.rows[y].p%3Ej)++y;N.rows[y].appendChild(v);for(z=0;z%3Cb;++z)N.rows[y+z].p+=a;y+=b;}t.parentNode.replaceChild(N,t);}})()"
      },
      {
         "title":"bullets to numbers",
         "uri":"javascript:uls=document.getElementsByTagName(%22ul%22);%20for%20(i=uls.length-1;%20i%3E=0;%20--i)%20{%20oldul%20=%20uls[i];%20newol%20=%20document.createElement(%22ol%22);%20for(j=0;j%3Coldul.childNodes.length;++j)%20newol.appendChild(oldul.childNodes[j].cloneNode(true));%20oldul.parentNode.replaceChild(newol,%20oldul);%20}%20void%200"
      },
      {
         "title":"number lines",
         "uri":"javascript:(function(){var%20i,p,L,d,j,n;%20for(i=0;%20p=document.getElementsByTagName(%22pre%22)[i];%20++i)%20{%20L=p.innerHTML.split(%22\\r\\n%22);%20d=%22%22+L.length;%20for(j=0;j%3CL.length;++j)%20{%20n%20=%20%22%22+(j+1)+%22.%20%22;%20while(n.length%3Cd.length+2)%20n=%220%22+n;%20L[j]%20=%20n%20+%20L[j];%20}%20p.innerHTML=L.join(%22%3Cbr%3E%22);/*join%20with%20br%20for%20ie*/%20}%20})()"
      },
      {
         "title":"rot13 selection",
         "uri":"javascript:var%20coding%20=%20%22abcdefghijklmnopqrstuvwxyzabcdefghijklmABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLM%22;%20function%20rot13(t)%20{%20for%20(var%20r%20=%20%22%22,i=0;i%3Ct.length;i++)%20{%20character%20=%20t.charAt(i);%20position%20=%20coding.indexOf(character);%20if%20(position%20%3E%20-1)%20character%20=%20coding.charAt(position%20+%2013);%20r%20+=%20character;%20}%20return%20r;%20}%20S=window.getSelection();%20function%20t(N)%20{%20return%20N.nodeType%20==%20N.TEXT_NODE;%20}%20function%20r(N)%20{%20if%20(t(N))%20N.data%20=%20rot13(N.data);%20}%20for%20(j=0;j%3CS.rangeCount;++j)%20{%20var%20g=S.getRangeAt(j),%20e=g.startContainer,%20f=g.endContainer,%20E=g.startOffset,%20F=g.endOffset,%20m=(e==f);%20if(!m||!t(e))%20{%20/*%20rot13%20each%20text%20node%20between%20e%20and%20f,%20not%20including%20e%20and%20f.%20*/%20q=document.createTreeWalker(g.commonAncestorContainer,%20NodeFilter.SHOW_ELEMENT%20|%20NodeFilter.SHOW_TEXT,%20null,%20false);%20q.currentNode=e;%20for(N=q.nextNode();%20N%20&&%20N%20!=%20f;%20N%20=%20q.nextNode())%20r(N);%20}%20if%20(t(f))%20f.splitText(F);%20if%20(!m)%20r(f);%20if%20(t(e))%20{%20r(k=e.splitText(E));%20if(m)f=k;%20e=k;}%20if%20(t(f))%20g.setEnd(f,f.data.length);%20}%20void%200"
      }
   ]
}
